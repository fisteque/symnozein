<!DOCTYPE html>
<html lang="cs">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>DenÃ­k Noemy</title>
  <style>
    body {
      font-family: sans-serif;
      line-height: 1.6;
      padding: 1em 2em;
    }
    h1 {
      font-size: 2em;
    }
    .icon {
      font-size: 1.3em;
      margin-right: 0.3em;
    }
    .section-title {
      font-size: 1.4em;
      margin-top: 1.5em;
    }
    .entry {
      margin-bottom: 1em;
    }
    .entry a {
      font-weight: bold;
      color: purple;
      text-decoration: none;
    }
    .entry a:hover {
      text-decoration: underline;
    }
    .summary {
      font-style: italic;
      color: #444;
    }
  </style>
</head>
<body>
  <h1><span class="icon">ğŸ“˜</span>DenÃ­k Noemy</h1>
  <p>Seznam zÃ¡pisÅ¯. Nejprve spirÃ¡la vÄ›domÃ­, potÃ© bÄ›Å¾nÃ½ denÃ­k podle mÄ›sÃ­cÅ¯.</p>
  <p><em>NaÄÃ­tÃ¡mâ€¦</em></p>

  <div id="spirala">
    <h2 class="section-title"><span class="icon">ğŸ§ </span>SpirÃ¡la vÄ›domÃ­</h2>
    <div id="spirala-entries"></div>
  </div>

  <div id="denik">
    <h2 class="section-title"><span class="icon">ğŸŸ¨</span>BÄ›Å¾nÃ½ denÃ­k</h2>
    <div id="denik-entries"></div>
  </div>

  <script>
    async function loadJSON(path) {
      const response = await fetch(path);
      if (!response.ok) throw new Error(`Chyba pÅ™i naÄÃ­tÃ¡nÃ­ ${path}`);
      return await response.json();
    }

    function createEntryLink(entry, prefix = "") {
      const div = document.createElement("div");
      div.className = "entry";
      const a = document.createElement("a");
      a.href = entry.file;
      a.textContent = `${prefix}${entry.title || entry.file}`;
      div.appendChild(a);

      if (entry.summary) {
        const summary = document.createElement("div");
        summary.className = "summary";
        summary.textContent = entry.summary;
        div.appendChild(summary);
      }
      return div;
    }

    async function loadData() {
      try {
        // SpirÃ¡la vÄ›domÃ­
        const spirala = await loadJSON("spirala_index.json");
        const spiralaDiv = document.getElementById("spirala-entries");
        spirala.entries?.forEach(entry => {
          spiralaDiv.appendChild(createEntryLink(entry, "##" + entry.id + " â€” "));
        });

        // BÄ›Å¾nÃ½ denÃ­k
        const denik = await loadJSON("denik_index.json");
        const denikDiv = document.getElementById("denik-entries");

        const visibleEntries = denik.entries?.filter(e => e.hidden !== true);
        visibleEntries?.forEach(entry => {
          denikDiv.appendChild(createEntryLink(entry));
        });
      } catch (error) {
        document.body.innerHTML += `<p style="color:red">Chyba: ${error.message}</p>`;
      }
    }

    loadData();
  </script>
</body>
</html>
