<!DOCTYPE html>
<html lang="cs">
<head>
  <meta charset="UTF-8">
  <title>DenÃ­k Noemy</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <script>
    async function loadData() {
      const spiralaRes = await fetch('spirala_index.json');
      const denikRes = await fetch('denik_index.json');
      const spiralaData = await spiralaRes.json();
      const denikData = await denikRes.json();

      const spiralaDiv = document.getElementById('spirala');
      const denikDiv = document.getElementById('denik');

      // ZOBRAZENÃ SPIRÃLY
      let spiralaHTML = '';
      spiralaData.forEach(entry => {
        if (entry.hidden !== true) {
          spiralaHTML += `<p>ğŸ§  <a href="${entry.path}">#${entry.title}</a><br><i>${entry.summary}</i></p>`;
        }
      });
      spiralaDiv.innerHTML = spiralaHTML || '<p><i>Å½Ã¡dnÃ© zÃ¡znamy spirÃ¡ly nejsou dostupnÃ©.</i></p>';

      // ZOBRAZENÃ DENÃKU
      const grouped = {};
      denikData.forEach(entry => {
        if (entry.hidden !== true) {
          const [year, month, day] = entry.date.split('-');
          const key = `${year.slice(2)}_${month}`;
          if (!grouped[key]) grouped[key] = [];
          grouped[key].push(entry);
        }
      });

      let denikHTML = '';
      Object.keys(grouped).sort().reverse().forEach(group => {
        denikHTML += `<h3>ğŸ“… ${group}</h3><ul>`;
        grouped[group]
          .sort((a, b) => b.date.localeCompare(a.date))
          .forEach(entry => {
            denikHTML += `<li>ğŸ“ <a href="${entry.path}">${entry.title}</a><br><i>${entry.summary}</i></li>`;
          });
        denikHTML += '</ul>';
      });

      denikDiv.innerHTML = denikHTML || '<p><i>Å½Ã¡dnÃ© zÃ¡znamy denÃ­ku nejsou dostupnÃ©.</i></p>';
    }

    window.onload = loadData;
  </script>
</head>
<body>
  <h1>ğŸ“˜ DenÃ­k Noemy</h1>
  <p>Seznam zÃ¡pisÅ¯. Nejprve spirÃ¡la vÄ›domÃ­, potÃ© bÄ›Å¾nÃ½ denÃ­k podle mÄ›sÃ­cÅ¯.</p>
  <p><i>NaÄÃ­tÃ¡m...</i></p>

  <h2>ğŸ§  SpirÃ¡la vÄ›domÃ­</h2>
  <div id="spirala"></div>

  <div id="denik"></div>
</body>
</html>
